{"ast":null,"code":"import { take } from 'rxjs';\nimport { fetchRecipesAction, setRecipesAction } from '../store/actions/recipes.actions';\nimport { ofType } from '@ngrx/effects';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/data-storage.service\";\nimport * as i2 from \"./recipe.service\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@ngrx/effects\";\nexport class RecipesResolverService {\n  constructor(dataStorageService, recipesService, store, actions$) {\n    this.dataStorageService = dataStorageService;\n    this.recipesService = recipesService;\n    this.store = store;\n    this.actions$ = actions$;\n  }\n  resolve(route, state) {\n    // const recipes = this.recipesService.getRecipes();\n    // if (recipes.length === 0) {\n    //   return this.dataStorageService.fetchRecipes();\n    // } else {\n    //   return recipes;\n    // }\n    this.store.dispatch(fetchRecipesAction());\n    return this.actions$.pipe(ofType(setRecipesAction), take(1));\n  }\n  static #_ = this.ɵfac = function RecipesResolverService_Factory(t) {\n    return new (t || RecipesResolverService)(i0.ɵɵinject(i1.DataStorageService), i0.ɵɵinject(i2.RecipeService), i0.ɵɵinject(i3.Store), i0.ɵɵinject(i4.Actions));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: RecipesResolverService,\n    factory: RecipesResolverService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["take","fetchRecipesAction","setRecipesAction","ofType","RecipesResolverService","constructor","dataStorageService","recipesService","store","actions$","resolve","route","state","dispatch","pipe","_","i0","ɵɵinject","i1","DataStorageService","i2","RecipeService","i3","Store","i4","Actions","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\asolu\\PersonalDevProjects\\Udemy\\Angular-The_Complete_Guide_2023_Edition\\ngrx-00-starting-project\\src\\app\\recipes\\recipes-resolver.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  Resolve,\n  ActivatedRouteSnapshot,\n  RouterStateSnapshot,\n} from '@angular/router';\n\nimport { Recipe } from './recipe.model';\nimport { DataStorageService } from '../shared/data-storage.service';\nimport { RecipeService } from './recipe.service';\nimport { Store } from '@ngrx/store';\nimport { StoreModel } from '../store/store.model';\nimport { recipesSelector } from '../store/selectors/recipe.selectors';\nimport { map, take } from 'rxjs';\nimport {\n  FETCH_RECIPES,\n  fetchRecipesAction,\n  setRecipesAction,\n} from '../store/actions/recipes.actions';\nimport { Actions, ofType } from '@ngrx/effects';\n\n@Injectable({ providedIn: 'root' })\nexport class RecipesResolverService implements Resolve<Recipe[]> {\n  constructor(\n    private dataStorageService: DataStorageService,\n    private recipesService: RecipeService,\n    private store: Store<StoreModel>,\n    private actions$: Actions\n  ) {}\n\n  resolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    // const recipes = this.recipesService.getRecipes();\n\n    // if (recipes.length === 0) {\n    //   return this.dataStorageService.fetchRecipes();\n    // } else {\n    //   return recipes;\n    // }\n    this.store.dispatch(fetchRecipesAction());\n    return this.actions$.pipe(ofType(setRecipesAction), take(1));\n  }\n}\n"],"mappings":"AAaA,SAAcA,IAAI,QAAQ,MAAM;AAChC,SAEEC,kBAAkB,EAClBC,gBAAgB,QACX,kCAAkC;AACzC,SAAkBC,MAAM,QAAQ,eAAe;;;;;;AAG/C,OAAM,MAAOC,sBAAsB;EACjCC,YACUC,kBAAsC,EACtCC,cAA6B,EAC7BC,KAAwB,EACxBC,QAAiB;IAHjB,KAAAH,kBAAkB,GAAlBA,kBAAkB;IAClB,KAAAC,cAAc,GAAdA,cAAc;IACd,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,QAAQ,GAARA,QAAQ;EACf;EAEHC,OAAOA,CAACC,KAA6B,EAAEC,KAA0B;IAC/D;IAEA;IACA;IACA;IACA;IACA;IACA,IAAI,CAACJ,KAAK,CAACK,QAAQ,CAACZ,kBAAkB,EAAE,CAAC;IACzC,OAAO,IAAI,CAACQ,QAAQ,CAACK,IAAI,CAACX,MAAM,CAACD,gBAAgB,CAAC,EAAEF,IAAI,CAAC,CAAC,CAAC,CAAC;EAC9D;EAAC,QAAAe,CAAA,G;qBAlBUX,sBAAsB,EAAAY,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,kBAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,aAAA,GAAAL,EAAA,CAAAC,QAAA,CAAAK,EAAA,CAAAC,KAAA,GAAAP,EAAA,CAAAC,QAAA,CAAAO,EAAA,CAAAC,OAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAtBtB,sBAAsB;IAAAuB,OAAA,EAAtBvB,sBAAsB,CAAAwB,IAAA;IAAAC,UAAA,EADT;EAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}