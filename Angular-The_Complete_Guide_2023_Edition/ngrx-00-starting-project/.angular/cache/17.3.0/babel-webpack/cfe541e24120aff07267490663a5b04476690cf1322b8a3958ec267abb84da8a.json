{"ast":null,"code":"import { userSelector } from '../store/selectors/auth.selectors';\nimport { logoutAction } from '../store/actions/auth.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/data-storage.service\";\nimport * as i2 from \"../auth/auth.service\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../shared/dropdown.directive\";\nfunction HeaderComponent_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"a\", 12);\n    i0.ɵɵtext(2, \"Recipes\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 7)(1, \"a\", 13);\n    i0.ɵɵtext(2, \"Authenticate\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 14);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_13_Template_a_click_1_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onLogout());\n    });\n    i0.ɵɵtext(2, \"Logout\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction HeaderComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 15)(1, \"a\", 16);\n    i0.ɵɵtext(2, \"Manage \");\n    i0.ɵɵelement(3, \"span\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ul\", 18)(5, \"li\")(6, \"a\", 14);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_14_Template_a_click_6_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onSaveData());\n    });\n    i0.ɵɵtext(7, \"Save Data\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"li\")(9, \"a\", 14);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_li_14_Template_a_click_9_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onFetchData());\n    });\n    i0.ɵɵtext(10, \"Fetch Data\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nexport class HeaderComponent {\n  constructor(dataStorageService, authService, store) {\n    this.dataStorageService = dataStorageService;\n    this.authService = authService;\n    this.store = store;\n    this.isAuthenticated = false;\n  }\n  ngOnInit() {\n    // this.userSub = this.authService.user.subscribe(user => {\n    //   this.isAuthenticated = !!user;\n    //   console.log(!user);\n    //   console.log(!!user);\n    // });\n    this.userSub = this.store.select(userSelector).subscribe(user => {\n      this.isAuthenticated = !!user;\n    });\n  }\n  onSaveData() {\n    this.dataStorageService.storeRecipes();\n  }\n  onFetchData() {\n    this.dataStorageService.fetchRecipes().subscribe();\n  }\n  onLogout() {\n    //this.authService.logout();\n    this.store.dispatch(logoutAction());\n  }\n  ngOnDestroy() {\n    this.userSub.unsubscribe();\n  }\n  static #_ = this.ɵfac = function HeaderComponent_Factory(t) {\n    return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.DataStorageService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Store));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeaderComponent,\n    selectors: [[\"app-header\"]],\n    decls: 15,\n    vars: 4,\n    consts: [[1, \"navbar\", \"navbar-default\"], [1, \"container-fluid\"], [1, \"navbar-header\"], [\"routerLink\", \"/\", 1, \"navbar-brand\"], [1, \"collapse\", \"navbar-collapse\"], [1, \"nav\", \"navbar-nav\"], [\"routerLinkActive\", \"active\", 4, \"ngIf\"], [\"routerLinkActive\", \"active\"], [\"routerLink\", \"/shopping-list\"], [1, \"nav\", \"navbar-nav\", \"navbar-right\"], [4, \"ngIf\"], [\"class\", \"dropdown\", \"appDropdown\", \"\", 4, \"ngIf\"], [\"routerLink\", \"/recipes\"], [\"routerLink\", \"/auth\"], [2, \"cursor\", \"pointer\", 3, \"click\"], [\"appDropdown\", \"\", 1, \"dropdown\"], [\"role\", \"button\", 1, \"dropdown-toggle\", 2, \"cursor\", \"pointer\"], [1, \"caret\"], [1, \"dropdown-menu\"]],\n    template: function HeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"nav\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"a\", 3);\n        i0.ɵɵtext(4, \"Recipe Book\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"ul\", 5);\n        i0.ɵɵtemplate(7, HeaderComponent_li_7_Template, 3, 0, \"li\", 6)(8, HeaderComponent_li_8_Template, 3, 0, \"li\", 6);\n        i0.ɵɵelementStart(9, \"li\", 7)(10, \"a\", 8);\n        i0.ɵɵtext(11, \"Shopping List\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(12, \"ul\", 9);\n        i0.ɵɵtemplate(13, HeaderComponent_li_13_Template, 3, 0, \"li\", 10)(14, HeaderComponent_li_14_Template, 11, 0, \"li\", 11);\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", !ctx.isAuthenticated);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n        i0.ɵɵadvance();\n        i0.ɵɵproperty(\"ngIf\", ctx.isAuthenticated);\n      }\n    },\n    dependencies: [i4.NgIf, i5.RouterLink, i5.RouterLinkActive, i6.DropdownDirective],\n    encapsulation: 2\n  });\n}","map":{"version":3,"names":["userSelector","logoutAction","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","HeaderComponent_li_13_Template_a_click_1_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","onLogout","ɵɵelement","HeaderComponent_li_14_Template_a_click_6_listener","_r3","onSaveData","HeaderComponent_li_14_Template_a_click_9_listener","onFetchData","HeaderComponent","constructor","dataStorageService","authService","store","isAuthenticated","ngOnInit","userSub","select","subscribe","user","storeRecipes","fetchRecipes","dispatch","ngOnDestroy","unsubscribe","_","ɵɵdirectiveInject","i1","DataStorageService","i2","AuthService","i3","Store","_2","selectors","decls","vars","consts","template","HeaderComponent_Template","rf","ctx","ɵɵtemplate","HeaderComponent_li_7_Template","HeaderComponent_li_8_Template","HeaderComponent_li_13_Template","HeaderComponent_li_14_Template","ɵɵadvance","ɵɵproperty"],"sources":["C:\\Users\\asolu\\PersonalDevProjects\\Udemy\\Angular-The_Complete_Guide_2023_Edition\\ngrx-00-starting-project\\src\\app\\header\\header.component.ts","C:\\Users\\asolu\\PersonalDevProjects\\Udemy\\Angular-The_Complete_Guide_2023_Edition\\ngrx-00-starting-project\\src\\app\\header\\header.component.html"],"sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Store } from '@ngrx/store';\n\nimport { DataStorageService } from '../shared/data-storage.service';\nimport { AuthService } from '../auth/auth.service';\nimport { userSelector } from '../store/selectors/auth.selectors';\nimport { logoutAction } from '../store/actions/auth.actions';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n})\nexport class HeaderComponent implements OnInit, OnDestroy {\n  isAuthenticated = false;\n  private userSub: Subscription;\n\n  constructor(\n    private dataStorageService: DataStorageService,\n    private authService: AuthService,\n    private store: Store\n  ) {}\n\n  ngOnInit() {\n    // this.userSub = this.authService.user.subscribe(user => {\n    //   this.isAuthenticated = !!user;\n    //   console.log(!user);\n    //   console.log(!!user);\n    // });\n\n    this.userSub = this.store.select(userSelector).subscribe((user) => {\n      this.isAuthenticated = !!user;\n    });\n  }\n\n  onSaveData() {\n    this.dataStorageService.storeRecipes();\n  }\n\n  onFetchData() {\n    this.dataStorageService.fetchRecipes().subscribe();\n  }\n\n  onLogout() {\n    //this.authService.logout();\n    this.store.dispatch(logoutAction());\n  }\n\n  ngOnDestroy() {\n    this.userSub.unsubscribe();\n  }\n}\n","<nav class=\"navbar navbar-default\">\n  <div class=\"container-fluid\">\n    <div class=\"navbar-header\">\n      <a routerLink=\"/\" class=\"navbar-brand\">Recipe Book</a>\n    </div>\n\n    <div class=\"collapse navbar-collapse\">\n      <ul class=\"nav navbar-nav\">\n        <li routerLinkActive=\"active\" *ngIf=\"isAuthenticated\">\n          <a routerLink=\"/recipes\">Recipes</a>\n        </li>\n        <li routerLinkActive=\"active\" *ngIf=\"!isAuthenticated\">\n          <a routerLink=\"/auth\">Authenticate</a>\n        </li>\n        <li routerLinkActive=\"active\">\n          <a routerLink=\"/shopping-list\">Shopping List</a>\n        </li>\n      </ul>\n      <ul class=\"nav navbar-nav navbar-right\">\n        <li *ngIf=\"isAuthenticated\">\n          <a style=\"cursor: pointer;\" (click)=\"onLogout()\">Logout</a>\n        </li>\n        <li class=\"dropdown\" appDropdown *ngIf=\"isAuthenticated\">\n          <a style=\"cursor: pointer;\" class=\"dropdown-toggle\" role=\"button\"\n            >Manage <span class=\"caret\"></span\n          ></a>\n          <ul class=\"dropdown-menu\">\n            <li>\n              <a style=\"cursor: pointer;\" (click)=\"onSaveData()\">Save Data</a>\n            </li>\n            <li>\n              <a style=\"cursor: pointer;\" (click)=\"onFetchData()\">Fetch Data</a>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </div>\n</nav>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}