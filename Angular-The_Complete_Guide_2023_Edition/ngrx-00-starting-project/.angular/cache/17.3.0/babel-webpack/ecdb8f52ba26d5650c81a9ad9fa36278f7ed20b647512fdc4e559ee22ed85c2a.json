{"ast":null,"code":"import { inject } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { FETCH_RECIPES, setRecipesAction } from '../../actions/recipes.actions';\nimport { map, switchMap } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nexport const fetchRecipesEffect = createEffect((actions$ = inject(Actions), http = inject(HttpClient)) => {\n  return actions$.pipe(ofType(FETCH_RECIPES), switchMap(() => http.get('https://recipe-app-project-98dbb-default-rtdb.firebaseio.com/recipes.json')), map(recipes => {\n    return recipes.map(recipe => {\n      return {\n        ...recipe,\n        ingredients: recipe.ingredients ? recipe.ingredients : []\n      };\n    });\n  }), map(recipes => {\n    //this.recipeService.setRecipes(recipes);\n    //store.dispatch(setRecipesAction({ recipes: recipes }));\n    return setRecipesAction({\n      recipes: recipes\n    });\n  }));\n}, {\n  functional: true,\n  dispatch: true\n});","map":{"version":3,"names":["inject","Actions","createEffect","ofType","FETCH_RECIPES","setRecipesAction","map","switchMap","HttpClient","fetchRecipesEffect","actions$","http","pipe","get","recipes","recipe","ingredients","functional","dispatch"],"sources":["C:\\Users\\asolu\\PersonalDevProjects\\Udemy\\Angular-The_Complete_Guide_2023_Edition\\ngrx-00-starting-project\\src\\app\\store\\effects\\recipe\\recipe.effects.ts"],"sourcesContent":["import { inject } from '@angular/core';\r\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\r\nimport { FETCH_RECIPES, setRecipesAction } from '../../actions/recipes.actions';\r\nimport { map, switchMap, tap } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Recipe } from 'src/app/recipes/recipe.model';\r\n\r\nexport const fetchRecipesEffect = createEffect(\r\n  (actions$ = inject(Actions), http = inject(HttpClient)) => {\r\n    return actions$.pipe(\r\n      ofType(FETCH_RECIPES),\r\n      switchMap(() =>\r\n        http.get<Recipe[]>(\r\n          'https://recipe-app-project-98dbb-default-rtdb.firebaseio.com/recipes.json'\r\n        )\r\n      ),\r\n      map((recipes) => {\r\n        return recipes.map((recipe) => {\r\n          return {\r\n            ...recipe,\r\n            ingredients: recipe.ingredients ? recipe.ingredients : [],\r\n          };\r\n        });\r\n      }),\r\n      map((recipes) => {\r\n        //this.recipeService.setRecipes(recipes);\r\n        //store.dispatch(setRecipesAction({ recipes: recipes }));\r\n        return setRecipesAction({ recipes: recipes });\r\n      })\r\n    );\r\n  },\r\n  { functional: true, dispatch: true }\r\n);\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,eAAe;AACtC,SAASC,OAAO,EAAEC,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAC7D,SAASC,aAAa,EAAEC,gBAAgB,QAAQ,+BAA+B;AAC/E,SAASC,GAAG,EAAEC,SAAS,QAAa,MAAM;AAC1C,SAASC,UAAU,QAAQ,sBAAsB;AAGjD,OAAO,MAAMC,kBAAkB,GAAGP,YAAY,CAC5C,CAACQ,QAAQ,GAAGV,MAAM,CAACC,OAAO,CAAC,EAAEU,IAAI,GAAGX,MAAM,CAACQ,UAAU,CAAC,KAAI;EACxD,OAAOE,QAAQ,CAACE,IAAI,CAClBT,MAAM,CAACC,aAAa,CAAC,EACrBG,SAAS,CAAC,MACRI,IAAI,CAACE,GAAG,CACN,2EAA2E,CAC5E,CACF,EACDP,GAAG,CAAEQ,OAAO,IAAI;IACd,OAAOA,OAAO,CAACR,GAAG,CAAES,MAAM,IAAI;MAC5B,OAAO;QACL,GAAGA,MAAM;QACTC,WAAW,EAAED,MAAM,CAACC,WAAW,GAAGD,MAAM,CAACC,WAAW,GAAG;OACxD;IACH,CAAC,CAAC;EACJ,CAAC,CAAC,EACFV,GAAG,CAAEQ,OAAO,IAAI;IACd;IACA;IACA,OAAOT,gBAAgB,CAAC;MAAES,OAAO,EAAEA;IAAO,CAAE,CAAC;EAC/C,CAAC,CAAC,CACH;AACH,CAAC,EACD;EAAEG,UAAU,EAAE,IAAI;EAAEC,QAAQ,EAAE;AAAI,CAAE,CACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}